{"version":3,"sources":["../node_modules/babel-helper-remap-async-to-generator/lib/for-await.js"],"names":["exports","node","path","scope","parent","stepKey","stepValue","left","declar","t","template","buildForAwait","_babelTraverse2","ITERATOR_HAD_ERROR_KEY","ITERATOR_COMPLETION","ITERATOR_ERROR_KEY","ITERATOR_KEY","GET_ITERATOR","helpers","OBJECT","STEP_VALUE","STEP_KEY","AWAIT","wrapAwait","isLabeledParent","tryBody","loop","replaceParent","_babelTypes","require","_interopRequireWildcard","_babelTemplate","_babelTemplate2","_interopRequireDefault","_babelTraverse","obj","default","newObj","Object","forAwaitVisitor","noScope","Identifier","replacements","CallExpression","callee","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (path, helpers) {\n  var node = path.node,\n      scope = path.scope,\n      parent = path.parent;\n\n\n  var stepKey = scope.generateUidIdentifier(\"step\");\n  var stepValue = scope.generateUidIdentifier(\"value\");\n  var left = node.left;\n  var declar = void 0;\n\n  if (t.isIdentifier(left) || t.isPattern(left) || t.isMemberExpression(left)) {\n    declar = t.expressionStatement(t.assignmentExpression(\"=\", left, stepValue));\n  } else if (t.isVariableDeclaration(left)) {\n    declar = t.variableDeclaration(left.kind, [t.variableDeclarator(left.declarations[0].id, stepValue)]);\n  }\n\n  var template = buildForAwait();\n\n  (0, _babelTraverse2.default)(template, forAwaitVisitor, null, {\n    ITERATOR_HAD_ERROR_KEY: scope.generateUidIdentifier(\"didIteratorError\"),\n    ITERATOR_COMPLETION: scope.generateUidIdentifier(\"iteratorNormalCompletion\"),\n    ITERATOR_ERROR_KEY: scope.generateUidIdentifier(\"iteratorError\"),\n    ITERATOR_KEY: scope.generateUidIdentifier(\"iterator\"),\n    GET_ITERATOR: helpers.getAsyncIterator,\n    OBJECT: node.right,\n    STEP_VALUE: stepValue,\n    STEP_KEY: stepKey,\n    AWAIT: helpers.wrapAwait\n  });\n\n  template = template.body.body;\n\n  var isLabeledParent = t.isLabeledStatement(parent);\n  var tryBody = template[3].block.body;\n  var loop = tryBody[0];\n\n  if (isLabeledParent) {\n    tryBody[0] = t.labeledStatement(parent.label, loop);\n  }\n\n  return {\n    replaceParent: isLabeledParent,\n    node: template,\n    declar: declar,\n    loop: loop\n  };\n};\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _babelTraverse2 = _interopRequireDefault(_babelTraverse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar buildForAwait = (0, _babelTemplate2.default)(\"\\n  function* wrapper() {\\n    var ITERATOR_COMPLETION = true;\\n    var ITERATOR_HAD_ERROR_KEY = false;\\n    var ITERATOR_ERROR_KEY = undefined;\\n    try {\\n      for (\\n        var ITERATOR_KEY = GET_ITERATOR(OBJECT), STEP_KEY, STEP_VALUE;\\n        (\\n          STEP_KEY = yield AWAIT(ITERATOR_KEY.next()),\\n          ITERATOR_COMPLETION = STEP_KEY.done,\\n          STEP_VALUE = yield AWAIT(STEP_KEY.value),\\n          !ITERATOR_COMPLETION\\n        );\\n        ITERATOR_COMPLETION = true) {\\n      }\\n    } catch (err) {\\n      ITERATOR_HAD_ERROR_KEY = true;\\n      ITERATOR_ERROR_KEY = err;\\n    } finally {\\n      try {\\n        if (!ITERATOR_COMPLETION && ITERATOR_KEY.return) {\\n          yield AWAIT(ITERATOR_KEY.return());\\n        }\\n      } finally {\\n        if (ITERATOR_HAD_ERROR_KEY) {\\n          throw ITERATOR_ERROR_KEY;\\n        }\\n      }\\n    }\\n  }\\n\");\n\nvar forAwaitVisitor = {\n  noScope: true,\n\n  Identifier: function Identifier(path, replacements) {\n    if (path.node.name in replacements) {\n      path.replaceInline(replacements[path.node.name]);\n    }\n  },\n  CallExpression: function CallExpression(path, replacements) {\n    var callee = path.node.callee;\n\n    if (t.isIdentifier(callee) && callee.name === \"AWAIT\" && !replacements.AWAIT) {\n      path.replaceWith(path.node.arguments[0]);\n    }\n  }\n};\n\nmodule.exports = exports[\"default\"];"],"file":"for-await.js"}