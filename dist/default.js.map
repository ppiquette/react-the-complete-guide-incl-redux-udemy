{"version":3,"sources":["../node_modules/babel-plugin-transform-es2015-parameters/lib/default.js"],"names":["exports","_getIterator2","require","_getIterator3","_interopRequireDefault","_babelHelperGetFunctionArity","_babelHelperGetFunctionArity2","_babelHelperCallDelegate","_babelHelperCallDelegate2","_babelTemplate","_babelTemplate2","_babelTypes","t","_interopRequireWildcard","obj","newObj","Object","default","buildDefaultParam","buildCutOff","_iterator","node","_isArray","Array","_i","_ref","param","scope","_scope$getOwnBinding","kind","iifeVisitor","ReferencedIdentifier","path","isSafeBinding","state","Scope","visitor","Function","hasDefaults","iife","body","argsIdentifier","defNode","VARIABLE_NAME","DEFAULT_VALUE","ARGUMENT_KEY","ARGUMENTS","lastNonDefaultParam","params","i","left","right","placeholder","pushDefNode","_i2","_param","declar"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.visitor = undefined;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _babelHelperGetFunctionArity = require(\"babel-helper-get-function-arity\");\n\nvar _babelHelperGetFunctionArity2 = _interopRequireDefault(_babelHelperGetFunctionArity);\n\nvar _babelHelperCallDelegate = require(\"babel-helper-call-delegate\");\n\nvar _babelHelperCallDelegate2 = _interopRequireDefault(_babelHelperCallDelegate);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar buildDefaultParam = (0, _babelTemplate2.default)(\"\\n  let VARIABLE_NAME =\\n    ARGUMENTS.length > ARGUMENT_KEY && ARGUMENTS[ARGUMENT_KEY] !== undefined ?\\n      ARGUMENTS[ARGUMENT_KEY]\\n    :\\n      DEFAULT_VALUE;\\n\");\n\nvar buildCutOff = (0, _babelTemplate2.default)(\"\\n  let $0 = $1[$2];\\n\");\n\nfunction hasDefaults(node) {\n  for (var _iterator = node.params, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var param = _ref;\n\n    if (!t.isIdentifier(param)) return true;\n  }\n  return false;\n}\n\nfunction isSafeBinding(scope, node) {\n  if (!scope.hasOwnBinding(node.name)) return true;\n\n  var _scope$getOwnBinding = scope.getOwnBinding(node.name),\n      kind = _scope$getOwnBinding.kind;\n\n  return kind === \"param\" || kind === \"local\";\n}\n\nvar iifeVisitor = {\n  ReferencedIdentifier: function ReferencedIdentifier(path, state) {\n    var scope = path.scope,\n        node = path.node;\n\n    if (node.name === \"eval\" || !isSafeBinding(scope, node)) {\n      state.iife = true;\n      path.stop();\n    }\n  },\n  Scope: function Scope(path) {\n    path.skip();\n  }\n};\n\nvar visitor = exports.visitor = {\n  Function: function Function(path) {\n    var node = path.node,\n        scope = path.scope;\n\n    if (!hasDefaults(node)) return;\n\n    path.ensureBlock();\n\n    var state = {\n      iife: false,\n      scope: scope\n    };\n\n    var body = [];\n\n    var argsIdentifier = t.identifier(\"arguments\");\n    argsIdentifier._shadowedFunctionLiteral = path;\n\n    function pushDefNode(left, right, i) {\n      var defNode = buildDefaultParam({\n        VARIABLE_NAME: left,\n        DEFAULT_VALUE: right,\n        ARGUMENT_KEY: t.numericLiteral(i),\n        ARGUMENTS: argsIdentifier\n      });\n      defNode._blockHoist = node.params.length - i;\n      body.push(defNode);\n    }\n\n    var lastNonDefaultParam = (0, _babelHelperGetFunctionArity2.default)(node);\n\n    var params = path.get(\"params\");\n    for (var i = 0; i < params.length; i++) {\n      var param = params[i];\n\n      if (!param.isAssignmentPattern()) {\n        if (!state.iife && !param.isIdentifier()) {\n          param.traverse(iifeVisitor, state);\n        }\n\n        continue;\n      }\n\n      var left = param.get(\"left\");\n      var right = param.get(\"right\");\n\n      if (i >= lastNonDefaultParam || left.isPattern()) {\n        var placeholder = scope.generateUidIdentifier(\"x\");\n        placeholder._isDefaultPlaceholder = true;\n        node.params[i] = placeholder;\n      } else {\n        node.params[i] = left.node;\n      }\n\n      if (!state.iife) {\n        if (right.isIdentifier() && !isSafeBinding(scope, right.node)) {\n          state.iife = true;\n        } else {\n          right.traverse(iifeVisitor, state);\n        }\n      }\n\n      pushDefNode(left.node, right.node, i);\n    }\n\n    for (var _i2 = lastNonDefaultParam + 1; _i2 < node.params.length; _i2++) {\n      var _param = node.params[_i2];\n      if (_param._isDefaultPlaceholder) continue;\n\n      var declar = buildCutOff(_param, argsIdentifier, t.numericLiteral(_i2));\n      declar._blockHoist = node.params.length - _i2;\n      body.push(declar);\n    }\n\n    node.params = node.params.slice(0, lastNonDefaultParam);\n\n    if (state.iife) {\n      body.push((0, _babelHelperCallDelegate2.default)(path, scope));\n      path.set(\"body\", t.blockStatement(body));\n    } else {\n      path.get(\"body\").unshiftContainer(\"body\", body);\n    }\n  }\n};"],"file":"default.js"}