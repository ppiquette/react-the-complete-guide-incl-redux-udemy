{"version":3,"sources":["../node_modules/babel-traverse/lib/visitors.js"],"names":["exports","_typeof2","require","_typeof3","_interopRequireDefault","_keys","_keys2","_getIterator2","_getIterator3","_virtualTypes","virtualTypes","_interopRequireWildcard","_babelMessages","messages","_babelTypes","t","_clone","_clone2","obj","newObj","Object","default","visitor","shouldIgnoreKey","parts","nodeType","fns","_iterator","_isArray","Array","_i","_ref","part","verify","ensureEntranceObjects","ensureCallbackArrays","_iterator2","_isArray2","_i2","_ref2","_nodeType3","wrapper","_fns2","wrapCheck","_iterator4","_isArray4","_i4","_ref4","_type","mergePair","_fns","aliases","deprecratedKey","console","_iterator3","_isArray3","_i3","_ref3","alias","existing","validateVisitorMethods","visitors","visitorKey","_iterator5","_isArray5","_i5","_ref5","fn","states","arguments","rootVisitor","i","state","explode","visitorType","wrapWithStateOrWrapper","nodeVisitor","newVisitor","_loop","oldVisitor","newFn","_ret","enter","key","dest","src"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = require(\"babel-runtime/core-js/object/keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.explode = explode;\nexports.verify = verify;\nexports.merge = merge;\n\nvar _virtualTypes = require(\"./path/lib/virtual-types\");\n\nvar virtualTypes = _interopRequireWildcard(_virtualTypes);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction explode(visitor) {\n  if (visitor._exploded) return visitor;\n  visitor._exploded = true;\n\n  for (var nodeType in visitor) {\n    if (shouldIgnoreKey(nodeType)) continue;\n\n    var parts = nodeType.split(\"|\");\n    if (parts.length === 1) continue;\n\n    var fns = visitor[nodeType];\n    delete visitor[nodeType];\n\n    for (var _iterator = parts, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var part = _ref;\n\n      visitor[part] = fns;\n    }\n  }\n\n  verify(visitor);\n\n  delete visitor.__esModule;\n\n  ensureEntranceObjects(visitor);\n\n  ensureCallbackArrays(visitor);\n\n  for (var _iterator2 = (0, _keys2.default)(visitor), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n    var _ref2;\n\n    if (_isArray2) {\n      if (_i2 >= _iterator2.length) break;\n      _ref2 = _iterator2[_i2++];\n    } else {\n      _i2 = _iterator2.next();\n      if (_i2.done) break;\n      _ref2 = _i2.value;\n    }\n\n    var _nodeType3 = _ref2;\n\n    if (shouldIgnoreKey(_nodeType3)) continue;\n\n    var wrapper = virtualTypes[_nodeType3];\n    if (!wrapper) continue;\n\n    var _fns2 = visitor[_nodeType3];\n    for (var type in _fns2) {\n      _fns2[type] = wrapCheck(wrapper, _fns2[type]);\n    }\n\n    delete visitor[_nodeType3];\n\n    if (wrapper.types) {\n      for (var _iterator4 = wrapper.types, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : (0, _getIterator3.default)(_iterator4);;) {\n        var _ref4;\n\n        if (_isArray4) {\n          if (_i4 >= _iterator4.length) break;\n          _ref4 = _iterator4[_i4++];\n        } else {\n          _i4 = _iterator4.next();\n          if (_i4.done) break;\n          _ref4 = _i4.value;\n        }\n\n        var _type = _ref4;\n\n        if (visitor[_type]) {\n          mergePair(visitor[_type], _fns2);\n        } else {\n          visitor[_type] = _fns2;\n        }\n      }\n    } else {\n      mergePair(visitor, _fns2);\n    }\n  }\n\n  for (var _nodeType in visitor) {\n    if (shouldIgnoreKey(_nodeType)) continue;\n\n    var _fns = visitor[_nodeType];\n\n    var aliases = t.FLIPPED_ALIAS_KEYS[_nodeType];\n\n    var deprecratedKey = t.DEPRECATED_KEYS[_nodeType];\n    if (deprecratedKey) {\n      console.trace(\"Visitor defined for \" + _nodeType + \" but it has been renamed to \" + deprecratedKey);\n      aliases = [deprecratedKey];\n    }\n\n    if (!aliases) continue;\n\n    delete visitor[_nodeType];\n\n    for (var _iterator3 = aliases, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var alias = _ref3;\n\n      var existing = visitor[alias];\n      if (existing) {\n        mergePair(existing, _fns);\n      } else {\n        visitor[alias] = (0, _clone2.default)(_fns);\n      }\n    }\n  }\n\n  for (var _nodeType2 in visitor) {\n    if (shouldIgnoreKey(_nodeType2)) continue;\n\n    ensureCallbackArrays(visitor[_nodeType2]);\n  }\n\n  return visitor;\n}\n\nfunction verify(visitor) {\n  if (visitor._verified) return;\n\n  if (typeof visitor === \"function\") {\n    throw new Error(messages.get(\"traverseVerifyRootFunction\"));\n  }\n\n  for (var nodeType in visitor) {\n    if (nodeType === \"enter\" || nodeType === \"exit\") {\n      validateVisitorMethods(nodeType, visitor[nodeType]);\n    }\n\n    if (shouldIgnoreKey(nodeType)) continue;\n\n    if (t.TYPES.indexOf(nodeType) < 0) {\n      throw new Error(messages.get(\"traverseVerifyNodeType\", nodeType));\n    }\n\n    var visitors = visitor[nodeType];\n    if ((typeof visitors === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(visitors)) === \"object\") {\n      for (var visitorKey in visitors) {\n        if (visitorKey === \"enter\" || visitorKey === \"exit\") {\n          validateVisitorMethods(nodeType + \".\" + visitorKey, visitors[visitorKey]);\n        } else {\n          throw new Error(messages.get(\"traverseVerifyVisitorProperty\", nodeType, visitorKey));\n        }\n      }\n    }\n  }\n\n  visitor._verified = true;\n}\n\nfunction validateVisitorMethods(path, val) {\n  var fns = [].concat(val);\n  for (var _iterator5 = fns, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : (0, _getIterator3.default)(_iterator5);;) {\n    var _ref5;\n\n    if (_isArray5) {\n      if (_i5 >= _iterator5.length) break;\n      _ref5 = _iterator5[_i5++];\n    } else {\n      _i5 = _iterator5.next();\n      if (_i5.done) break;\n      _ref5 = _i5.value;\n    }\n\n    var fn = _ref5;\n\n    if (typeof fn !== \"function\") {\n      throw new TypeError(\"Non-function found defined in \" + path + \" with type \" + (typeof fn === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(fn)));\n    }\n  }\n}\n\nfunction merge(visitors) {\n  var states = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var wrapper = arguments[2];\n\n  var rootVisitor = {};\n\n  for (var i = 0; i < visitors.length; i++) {\n    var visitor = visitors[i];\n    var state = states[i];\n\n    explode(visitor);\n\n    for (var type in visitor) {\n      var visitorType = visitor[type];\n\n      if (state || wrapper) {\n        visitorType = wrapWithStateOrWrapper(visitorType, state, wrapper);\n      }\n\n      var nodeVisitor = rootVisitor[type] = rootVisitor[type] || {};\n      mergePair(nodeVisitor, visitorType);\n    }\n  }\n\n  return rootVisitor;\n}\n\nfunction wrapWithStateOrWrapper(oldVisitor, state, wrapper) {\n  var newVisitor = {};\n\n  var _loop = function _loop(key) {\n    var fns = oldVisitor[key];\n\n    if (!Array.isArray(fns)) return \"continue\";\n\n    fns = fns.map(function (fn) {\n      var newFn = fn;\n\n      if (state) {\n        newFn = function newFn(path) {\n          return fn.call(state, path, state);\n        };\n      }\n\n      if (wrapper) {\n        newFn = wrapper(state.key, key, newFn);\n      }\n\n      return newFn;\n    });\n\n    newVisitor[key] = fns;\n  };\n\n  for (var key in oldVisitor) {\n    var _ret = _loop(key);\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return newVisitor;\n}\n\nfunction ensureEntranceObjects(obj) {\n  for (var key in obj) {\n    if (shouldIgnoreKey(key)) continue;\n\n    var fns = obj[key];\n    if (typeof fns === \"function\") {\n      obj[key] = { enter: fns };\n    }\n  }\n}\n\nfunction ensureCallbackArrays(obj) {\n  if (obj.enter && !Array.isArray(obj.enter)) obj.enter = [obj.enter];\n  if (obj.exit && !Array.isArray(obj.exit)) obj.exit = [obj.exit];\n}\n\nfunction wrapCheck(wrapper, fn) {\n  var newFn = function newFn(path) {\n    if (wrapper.checkPath(path)) {\n      return fn.apply(this, arguments);\n    }\n  };\n  newFn.toString = function () {\n    return fn.toString();\n  };\n  return newFn;\n}\n\nfunction shouldIgnoreKey(key) {\n  if (key[0] === \"_\") return true;\n\n  if (key === \"enter\" || key === \"exit\" || key === \"shouldSkip\") return true;\n\n  if (key === \"blacklist\" || key === \"noScope\" || key === \"skipKeys\") return true;\n\n  return false;\n}\n\nfunction mergePair(dest, src) {\n  for (var key in src) {\n    dest[key] = [].concat(dest[key] || [], src[key]);\n  }\n}"],"file":"visitors.js"}