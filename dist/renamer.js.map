{"version":3,"sources":["../node_modules/babel-traverse/lib/scope/lib/renamer.js"],"names":["exports","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_binding","_binding2","_babelTypes","t","_interopRequireWildcard","obj","newObj","Object","default","renameVisitor","ReferencedIdentifier","node","_ref","state","Scope","path","ids","name","Renamer","exportDeclar","parentDeclar","isDefault","bindingIdentifiers","specifiers","localName","exportedName","aliasDeclar","binding","oldName","newName","scope","block","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _binding = require(\"../binding\");\n\nvar _binding2 = _interopRequireDefault(_binding);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar renameVisitor = {\n  ReferencedIdentifier: function ReferencedIdentifier(_ref, state) {\n    var node = _ref.node;\n\n    if (node.name === state.oldName) {\n      node.name = state.newName;\n    }\n  },\n  Scope: function Scope(path, state) {\n    if (!path.scope.bindingIdentifierEquals(state.oldName, state.binding.identifier)) {\n      path.skip();\n    }\n  },\n  \"AssignmentExpression|Declaration\": function AssignmentExpressionDeclaration(path, state) {\n    var ids = path.getOuterBindingIdentifiers();\n\n    for (var name in ids) {\n      if (name === state.oldName) ids[name].name = state.newName;\n    }\n  }\n};\n\nvar Renamer = function () {\n  function Renamer(binding, oldName, newName) {\n    (0, _classCallCheck3.default)(this, Renamer);\n\n    this.newName = newName;\n    this.oldName = oldName;\n    this.binding = binding;\n  }\n\n  Renamer.prototype.maybeConvertFromExportDeclaration = function maybeConvertFromExportDeclaration(parentDeclar) {\n    var exportDeclar = parentDeclar.parentPath.isExportDeclaration() && parentDeclar.parentPath;\n    if (!exportDeclar) return;\n\n    var isDefault = exportDeclar.isExportDefaultDeclaration();\n\n    if (isDefault && (parentDeclar.isFunctionDeclaration() || parentDeclar.isClassDeclaration()) && !parentDeclar.node.id) {\n      parentDeclar.node.id = parentDeclar.scope.generateUidIdentifier(\"default\");\n    }\n\n    var bindingIdentifiers = parentDeclar.getOuterBindingIdentifiers();\n    var specifiers = [];\n\n    for (var name in bindingIdentifiers) {\n      var localName = name === this.oldName ? this.newName : name;\n      var exportedName = isDefault ? \"default\" : name;\n      specifiers.push(t.exportSpecifier(t.identifier(localName), t.identifier(exportedName)));\n    }\n\n    if (specifiers.length) {\n      var aliasDeclar = t.exportNamedDeclaration(null, specifiers);\n\n      if (parentDeclar.isFunctionDeclaration()) {\n        aliasDeclar._blockHoist = 3;\n      }\n\n      exportDeclar.insertAfter(aliasDeclar);\n      exportDeclar.replaceWith(parentDeclar.node);\n    }\n  };\n\n  Renamer.prototype.rename = function rename(block) {\n    var binding = this.binding,\n        oldName = this.oldName,\n        newName = this.newName;\n    var scope = binding.scope,\n        path = binding.path;\n\n\n    var parentDeclar = path.find(function (path) {\n      return path.isDeclaration() || path.isFunctionExpression();\n    });\n    if (parentDeclar) {\n      this.maybeConvertFromExportDeclaration(parentDeclar);\n    }\n\n    scope.traverse(block || scope.block, renameVisitor, this);\n\n    if (!block) {\n      scope.removeOwnBinding(oldName);\n      scope.bindings[newName] = binding;\n      this.binding.identifier.name = newName;\n    }\n\n    if (binding.type === \"hoisted\") {}\n  };\n\n  return Renamer;\n}();\n\nexports.default = Renamer;\nmodule.exports = exports[\"default\"];"],"file":"renamer.js"}