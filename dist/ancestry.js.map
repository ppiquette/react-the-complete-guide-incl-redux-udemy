{"version":3,"sources":["../node_modules/babel-traverse/lib/path/ancestry.js"],"names":["exports","_getIterator2","require","_getIterator3","_interopRequireDefault","_babelTypes","t","_interopRequireWildcard","_index","_index2","obj","newObj","Object","default","path","callback","Array","earliest","keys","deepest","_iterator","_isArray","_i","_ref","ancestry","i","earliestKeyIndex","currentKeyIndex","_this","paths","minDepth","lastCommonIndex","lastCommon","ancestries","first","depthLoop","shouldMatch","_iterator2","_isArray2","_i2","_ref2","filter","maybeDescendant","parent","_iterator3","_isArray3","_i3","_ref3","type","parentFn","p","shadow"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.findParent = findParent;\nexports.find = find;\nexports.getFunctionParent = getFunctionParent;\nexports.getStatementParent = getStatementParent;\nexports.getEarliestCommonAncestorFrom = getEarliestCommonAncestorFrom;\nexports.getDeepestCommonAncestorFrom = getDeepestCommonAncestorFrom;\nexports.getAncestry = getAncestry;\nexports.isAncestor = isAncestor;\nexports.isDescendant = isDescendant;\nexports.inType = inType;\nexports.inShadow = inShadow;\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _index = require(\"./index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction findParent(callback) {\n  var path = this;\n  while (path = path.parentPath) {\n    if (callback(path)) return path;\n  }\n  return null;\n}\n\nfunction find(callback) {\n  var path = this;\n  do {\n    if (callback(path)) return path;\n  } while (path = path.parentPath);\n  return null;\n}\n\nfunction getFunctionParent() {\n  return this.findParent(function (path) {\n    return path.isFunction() || path.isProgram();\n  });\n}\n\nfunction getStatementParent() {\n  var path = this;\n  do {\n    if (Array.isArray(path.container)) {\n      return path;\n    }\n  } while (path = path.parentPath);\n}\n\nfunction getEarliestCommonAncestorFrom(paths) {\n  return this.getDeepestCommonAncestorFrom(paths, function (deepest, i, ancestries) {\n    var earliest = void 0;\n    var keys = t.VISITOR_KEYS[deepest.type];\n\n    for (var _iterator = ancestries, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var ancestry = _ref;\n\n      var path = ancestry[i + 1];\n\n      if (!earliest) {\n        earliest = path;\n        continue;\n      }\n\n      if (path.listKey && earliest.listKey === path.listKey) {\n        if (path.key < earliest.key) {\n          earliest = path;\n          continue;\n        }\n      }\n\n      var earliestKeyIndex = keys.indexOf(earliest.parentKey);\n      var currentKeyIndex = keys.indexOf(path.parentKey);\n      if (earliestKeyIndex > currentKeyIndex) {\n        earliest = path;\n      }\n    }\n\n    return earliest;\n  });\n}\n\nfunction getDeepestCommonAncestorFrom(paths, filter) {\n  var _this = this;\n\n  if (!paths.length) {\n    return this;\n  }\n\n  if (paths.length === 1) {\n    return paths[0];\n  }\n\n  var minDepth = Infinity;\n\n  var lastCommonIndex = void 0,\n      lastCommon = void 0;\n\n  var ancestries = paths.map(function (path) {\n    var ancestry = [];\n\n    do {\n      ancestry.unshift(path);\n    } while ((path = path.parentPath) && path !== _this);\n\n    if (ancestry.length < minDepth) {\n      minDepth = ancestry.length;\n    }\n\n    return ancestry;\n  });\n\n  var first = ancestries[0];\n\n  depthLoop: for (var i = 0; i < minDepth; i++) {\n    var shouldMatch = first[i];\n\n    for (var _iterator2 = ancestries, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var ancestry = _ref2;\n\n      if (ancestry[i] !== shouldMatch) {\n        break depthLoop;\n      }\n    }\n\n    lastCommonIndex = i;\n    lastCommon = shouldMatch;\n  }\n\n  if (lastCommon) {\n    if (filter) {\n      return filter(lastCommon, lastCommonIndex, ancestries);\n    } else {\n      return lastCommon;\n    }\n  } else {\n    throw new Error(\"Couldn't find intersection\");\n  }\n}\n\nfunction getAncestry() {\n  var path = this;\n  var paths = [];\n  do {\n    paths.push(path);\n  } while (path = path.parentPath);\n  return paths;\n}\n\nfunction isAncestor(maybeDescendant) {\n  return maybeDescendant.isDescendant(this);\n}\n\nfunction isDescendant(maybeAncestor) {\n  return !!this.findParent(function (parent) {\n    return parent === maybeAncestor;\n  });\n}\n\nfunction inType() {\n  var path = this;\n  while (path) {\n    for (var _iterator3 = arguments, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var type = _ref3;\n\n      if (path.node.type === type) return true;\n    }\n    path = path.parentPath;\n  }\n\n  return false;\n}\n\nfunction inShadow(key) {\n  var parentFn = this.isFunction() ? this : this.findParent(function (p) {\n    return p.isFunction();\n  });\n  if (!parentFn) return;\n\n  if (parentFn.isFunctionExpression() || parentFn.isFunctionDeclaration()) {\n    var shadow = parentFn.node.shadow;\n\n    if (shadow && (!key || shadow[key] !== false)) {\n      return parentFn;\n    }\n  } else if (parentFn.isArrowFunctionExpression()) {\n    return parentFn;\n  }\n\n  return null;\n}"],"file":"ancestry.js"}