{"version":3,"sources":["../node_modules/babel-preset-env/lib/targets-parser.js"],"names":["exports","_browserslist","require","_browserslist2","_interopRequireDefault","_semver","_semver2","_utils","obj","default","browserNameMap","android","chrome","and_chr","edge","firefox","ie","ios_saf","safari","isBrowsersQueryValid","Array","semverMin","first","getLowestVersions","_browser$split","browser","browserName","browserVersion","normalizedBrowserName","splitVersion","parsedBrowserVersion","all","outputDecimalWarning","decimalTargets","console","target","_ref","value","targetParserMap","__default","node","parsed","process","uglify","getTargets","targets","arguments","targetOpts","results","parser","_parser","parsedTarget","parsedValue","decimalWarnings"],"mappings":"AAAA;;AAEAA,OAAO,CAAPA,UAAAA,GAAAA,IAAAA;;AAEA,IAAIC,aAAa,GAAGC,OAAO,CAA3B,cAA2B,CAA3B;;AAEA,IAAIC,cAAc,GAAGC,sBAAsB,CAA3C,aAA2C,CAA3C;;AAEA,IAAIC,OAAO,GAAGH,OAAO,CAArB,QAAqB,CAArB;;AAEA,IAAII,QAAQ,GAAGF,sBAAsB,CAArC,OAAqC,CAArC;;AAEA,IAAIG,MAAM,GAAGL,OAAO,CAApB,SAAoB,CAApB;;AAEA,SAAA,sBAAA,CAAA,GAAA,EAAqC;AAAE,SAAOM,GAAG,IAAIA,GAAG,CAAVA,UAAAA,GAAAA,GAAAA,GAA8B;AAAEC,IAAAA,OAAO,EAAED;AAAX,GAArC;AAAwD;;AAE/F,IAAIE,cAAc,GAAG;AACnBC,EAAAA,OAAO,EADY,SAAA;AAEnBC,EAAAA,MAAM,EAFa,QAAA;AAGnBC,EAAAA,OAAO,EAHY,QAAA;AAInBC,EAAAA,IAAI,EAJe,MAAA;AAKnBC,EAAAA,OAAO,EALY,SAAA;AAMnBC,EAAAA,EAAE,EANiB,IAAA;AAOnBC,EAAAA,OAAO,EAPY,KAAA;AAQnBC,EAAAA,MAAM,EAAE;AARW,CAArB;;AAWA,IAAIC,oBAAoB,GAAG,SAAA,oBAAA,CAAA,QAAA,EAAwC;AACjE,SAAO,OAAA,QAAA,KAAA,QAAA,IAAgCC,KAAK,CAALA,OAAAA,CAAvC,QAAuCA,CAAvC;AADF,CAAA;;AAIA,IAAIC,SAAS,GAAG,SAAA,SAAA,CAAA,KAAA,EAAA,MAAA,EAAkC;AAChD,SAAOC,KAAK,IAAIhB,QAAQ,CAARA,OAAAA,CAAAA,EAAAA,CAAAA,KAAAA,EAATgB,MAAShB,CAATgB,GAAAA,KAAAA,GAAP,MAAA;AADF,CAAA;;AAIA,IAAIC,iBAAiB,GAAG,SAAA,iBAAA,CAAA,QAAA,EAAqC;AAC3D,SAAO,QAAQ,CAAR,MAAA,CAAgB,UAAA,GAAA,EAAA,OAAA,EAAwB;AAC7C,QAAIC,cAAc,GAAGC,OAAO,CAAPA,KAAAA,CAArB,GAAqBA,CAArB;AAAA,QACIC,WAAW,GAAGF,cAAc,CADhC,CACgC,CADhC;AAAA,QAEIG,cAAc,GAAGH,cAAc,CAFnC,CAEmC,CAFnC;;AAIA,QAAII,qBAAqB,GAAGlB,cAAc,CAA1C,WAA0C,CAA1C;;AAEA,QAAI,CAAJ,qBAAA,EAA4B;AAC1B,aAAA,GAAA;AACD;;AAED,QAAI;AACF;AACA,UAAImB,YAAY,GAAGF,cAAc,CAAdA,KAAAA,CAAAA,GAAAA,EAAnB,CAAmBA,CAAnB;AACA,UAAIG,oBAAoB,GAAG,CAAC,GAAGvB,MAAM,CAAV,SAAA,EAA3B,YAA2B,CAA3B;AAEAwB,MAAAA,GAAG,CAAHA,qBAAG,CAAHA,GAA6BV,SAAS,CAACU,GAAG,CAAJ,qBAAI,CAAJ,EAAtCA,oBAAsC,CAAtCA;AALF,KAAA,CAME,OAAA,CAAA,EAAU,CAAE;;AAEd,WAAA,GAAA;AAnBK,GAAA,EAAP,EAAO,CAAP;AADF,CAAA;;AAwBA,IAAIC,oBAAoB,GAAG,SAAA,oBAAA,CAAA,cAAA,EAA8C;AACvE,MAAI,CAAA,cAAA,IAAmB,CAACC,cAAc,CAAtC,MAAA,EAA+C;AAC7C;AACD;;AAEDC,EAAAA,OAAO,CAAPA,GAAAA,CAAAA,6DAAAA;AACAA,EAAAA,OAAO,CAAPA,GAAAA,CAAAA,EAAAA;AACAD,EAAAA,cAAc,CAAdA,OAAAA,CAAuB,UAAA,IAAA,EAAgB;AACrC,QAAIE,MAAM,GAAGC,IAAI,CAAjB,MAAA;AAAA,QACIC,KAAK,GAAGD,IAAI,CADhB,KAAA;AAEA,WAAOF,OAAO,CAAPA,GAAAA,CAAY,OAAA,MAAA,GAAA,IAAA,GAAnB,KAAOA,CAAP;AAHFD,GAAAA;AAKAC,EAAAA,OAAO,CAAPA,GAAAA,CAAAA,EAAAA;AACAA,EAAAA,OAAO,CAAPA,GAAAA,CAAAA,iFAAAA;AACAA,EAAAA,OAAO,CAAPA,GAAAA,CAAAA,+DAAAA;AACAA,EAAAA,OAAO,CAAPA,GAAAA,CAAAA,EAAAA;AAfF,CAAA;;AAkBA,IAAII,eAAe,GAAG;AACpBC,EAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,MAAA,EAAA,KAAA,EAAkC;AAC3C,WAAO,CAAA,MAAA,EAAS,CAAC,GAAGhC,MAAM,CAAV,SAAA,EAAhB,KAAgB,CAAT,CAAP;AAFkB,GAAA;AAKpB;AACAiC,EAAAA,IAAI,EAAE,SAAA,IAAA,CAAA,MAAA,EAAA,KAAA,EAA6B;AACjC,QAAIC,MAAM,GAAGJ,KAAK,KAALA,IAAAA,IAAkBA,KAAK,KAAvBA,SAAAA,GAAwCK,OAAO,CAAPA,QAAAA,CAAxCL,IAAAA,GAAgE,CAAC,GAAG9B,MAAM,CAAV,SAAA,EAA7E,KAA6E,CAA7E;AAEA,WAAO,CAAA,MAAA,EAAP,MAAO,CAAP;AATkB,GAAA;AAYpB;AACAoC,EAAAA,MAAM,EAAE,SAAA,MAAA,CAAA,MAAA,EAAA,KAAA,EAA+B;AACrC,WAAO,CAAA,MAAA,EAASN,KAAK,KAArB,IAAO,CAAP;AACD;AAfmB,CAAtB;;AAkBA,IAAIO,UAAU,GAAG,SAAA,UAAA,GAAsB;AACrC,MAAIC,OAAO,GAAGC,SAAS,CAATA,MAAAA,GAAAA,CAAAA,IAAwBA,SAAS,CAATA,CAAS,CAATA,KAAxBA,SAAAA,GAAqDA,SAAS,CAA9DA,CAA8D,CAA9DA,GAAd,EAAA;AAEA,MAAIC,UAAU,GAHuB,EAGrC,CAHqC,CAKrC;;AACA,MAAI5B,oBAAoB,CAAC0B,OAAO,CAAhC,QAAwB,CAAxB,EAA4C;AAC1CE,IAAAA,UAAU,GAAGxB,iBAAiB,CAAC,CAAC,GAAGpB,cAAc,CAAlB,OAAA,EAA4B0C,OAAO,CAAlEE,QAA+B,CAAD,CAA9BA;AAPmC,GAAA,CAUrC;;;AACA,MAAIN,MAAM,GAAG,MAAM,CAAN,IAAA,CAAA,OAAA,EAAA,MAAA,CAA4B,UAAA,OAAA,EAAA,MAAA,EAA2B;AAClE,QAAIN,MAAM,KAAV,UAAA,EAA2B;AACzB,UAAIE,KAAK,GAAGQ,OAAO,CADM,MACN,CAAnB,CADyB,CAGzB;;AACA,UAAI,OAAA,KAAA,KAAA,QAAA,IAA6BR,KAAK,GAALA,CAAAA,KAAjC,CAAA,EAAkD;AAChDW,QAAAA,OAAO,CAAPA,eAAAA,CAAAA,IAAAA,CAA6B;AAAEb,UAAAA,MAAM,EAAR,MAAA;AAAkBE,UAAAA,KAAK,EAAEA;AAAzB,SAA7BW;AALuB,OAAA,CAQzB;;;AACA,UAAIC,MAAM,GAAGX,eAAe,CAAfA,MAAe,CAAfA,IAA2BA,eAAe,CAAvD,SAAA;;AAEA,UAAIY,OAAO,GAAGD,MAAM,CAAA,MAAA,EAApB,KAAoB,CAApB;AAAA,UACIE,YAAY,GAAGD,OAAO,CAD1B,CAC0B,CAD1B;AAAA,UAEIE,WAAW,GAAGF,OAAO,CAFzB,CAEyB,CAFzB;;AAIA,UAAA,WAAA,EAAiB;AACfF,QAAAA,OAAO,CAAPA,OAAAA,CAAAA,YAAAA,IAAAA,WAAAA;AACD;AACF;;AAED,WAAA,OAAA;AArBW,GAAA,EAsBV;AACDH,IAAAA,OAAO,EADN,UAAA;AAEDQ,IAAAA,eAAe,EAAE;AAFhB,GAtBU,CAAb;AA2BArB,EAAAA,oBAAoB,CAACS,MAAM,CAA3BT,eAAoB,CAApBA;AAEA,SAAOS,MAAM,CAAb,OAAA;AAxCF,CAAA;;AA2CAzC,OAAO,CAAPA,OAAAA,GAAAA,UAAAA","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _browserslist = require(\"browserslist\");\n\nvar _browserslist2 = _interopRequireDefault(_browserslist);\n\nvar _semver = require(\"semver\");\n\nvar _semver2 = _interopRequireDefault(_semver);\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar browserNameMap = {\n  android: \"android\",\n  chrome: \"chrome\",\n  and_chr: \"chrome\",\n  edge: \"edge\",\n  firefox: \"firefox\",\n  ie: \"ie\",\n  ios_saf: \"ios\",\n  safari: \"safari\"\n};\n\nvar isBrowsersQueryValid = function isBrowsersQueryValid(browsers) {\n  return typeof browsers === \"string\" || Array.isArray(browsers);\n};\n\nvar semverMin = function semverMin(first, second) {\n  return first && _semver2.default.lt(first, second) ? first : second;\n};\n\nvar getLowestVersions = function getLowestVersions(browsers) {\n  return browsers.reduce(function (all, browser) {\n    var _browser$split = browser.split(\" \"),\n        browserName = _browser$split[0],\n        browserVersion = _browser$split[1];\n\n    var normalizedBrowserName = browserNameMap[browserName];\n\n    if (!normalizedBrowserName) {\n      return all;\n    }\n\n    try {\n      // Browser version can return as \"10.0-10.2\"\n      var splitVersion = browserVersion.split(\"-\")[0];\n      var parsedBrowserVersion = (0, _utils.semverify)(splitVersion);\n\n      all[normalizedBrowserName] = semverMin(all[normalizedBrowserName], parsedBrowserVersion);\n    } catch (e) {}\n\n    return all;\n  }, {});\n};\n\nvar outputDecimalWarning = function outputDecimalWarning(decimalTargets) {\n  if (!decimalTargets || !decimalTargets.length) {\n    return;\n  }\n\n  console.log(\"Warning, the following targets are using a decimal version:\");\n  console.log(\"\");\n  decimalTargets.forEach(function (_ref) {\n    var target = _ref.target,\n        value = _ref.value;\n    return console.log(\"  \" + target + \": \" + value);\n  });\n  console.log(\"\");\n  console.log(\"We recommend using a string for minor/patch versions to avoid numbers like 6.10\");\n  console.log(\"getting parsed as 6.1, which can lead to unexpected behavior.\");\n  console.log(\"\");\n};\n\nvar targetParserMap = {\n  __default: function __default(target, value) {\n    return [target, (0, _utils.semverify)(value)];\n  },\n\n  // Parse `node: true` and `node: \"current\"` to version\n  node: function node(target, value) {\n    var parsed = value === true || value === \"current\" ? process.versions.node : (0, _utils.semverify)(value);\n\n    return [target, parsed];\n  },\n\n  // Only valid value for Uglify is `true`\n  uglify: function uglify(target, value) {\n    return [target, value === true];\n  }\n};\n\nvar getTargets = function getTargets() {\n  var targets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var targetOpts = {};\n\n  // Parse browsers target via browserslist\n  if (isBrowsersQueryValid(targets.browsers)) {\n    targetOpts = getLowestVersions((0, _browserslist2.default)(targets.browsers));\n  }\n\n  // Parse remaining targets\n  var parsed = Object.keys(targets).reduce(function (results, target) {\n    if (target !== \"browsers\") {\n      var value = targets[target];\n\n      // Warn when specifying minor/patch as a decimal\n      if (typeof value === \"number\" && value % 1 !== 0) {\n        results.decimalWarnings.push({ target: target, value: value });\n      }\n\n      // Check if we have a target parser?\n      var parser = targetParserMap[target] || targetParserMap.__default;\n\n      var _parser = parser(target, value),\n          parsedTarget = _parser[0],\n          parsedValue = _parser[1];\n\n      if (parsedValue) {\n        results.targets[parsedTarget] = parsedValue;\n      }\n    }\n\n    return results;\n  }, {\n    targets: targetOpts,\n    decimalWarnings: []\n  });\n\n  outputDecimalWarning(parsed.decimalWarnings);\n\n  return parsed.targets;\n};\n\nexports.default = getTargets;"],"file":"targets-parser.js"}