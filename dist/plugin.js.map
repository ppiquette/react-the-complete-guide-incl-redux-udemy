{"version":3,"sources":["../node_modules/babel-core/lib/transformation/plugin.js"],"names":["exports","_getIterator2","require","_getIterator3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_optionManager","_optionManager2","_babelMessages","messages","_interopRequireWildcard","_store","_store2","_babelTraverse","_babelTraverse2","_assign","_assign2","_clone","_clone2","obj","newObj","Object","default","GLOBAL_VISITOR_PROPS","Plugin","_this","_Store","val","target","fns","_len","arguments","args","Array","_key","_iterator","_isArray","_i","_ref","fn","ret","inherits","_iterator2","_isArray2","_i2","_ref2","key","visitor","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _optionManager = require(\"./file/options/option-manager\");\n\nvar _optionManager2 = _interopRequireDefault(_optionManager);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _store = require(\"../store\");\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _babelTraverse2 = _interopRequireDefault(_babelTraverse);\n\nvar _assign = require(\"lodash/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GLOBAL_VISITOR_PROPS = [\"enter\", \"exit\"];\n\nvar Plugin = function (_Store) {\n  (0, _inherits3.default)(Plugin, _Store);\n\n  function Plugin(plugin, key) {\n    (0, _classCallCheck3.default)(this, Plugin);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Store.call(this));\n\n    _this.initialized = false;\n    _this.raw = (0, _assign2.default)({}, plugin);\n    _this.key = _this.take(\"name\") || key;\n\n    _this.manipulateOptions = _this.take(\"manipulateOptions\");\n    _this.post = _this.take(\"post\");\n    _this.pre = _this.take(\"pre\");\n    _this.visitor = _this.normaliseVisitor((0, _clone2.default)(_this.take(\"visitor\")) || {});\n    return _this;\n  }\n\n  Plugin.prototype.take = function take(key) {\n    var val = this.raw[key];\n    delete this.raw[key];\n    return val;\n  };\n\n  Plugin.prototype.chain = function chain(target, key) {\n    if (!target[key]) return this[key];\n    if (!this[key]) return target[key];\n\n    var fns = [target[key], this[key]];\n\n    return function () {\n      var val = void 0;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      for (var _iterator = fns, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var fn = _ref;\n\n        if (fn) {\n          var ret = fn.apply(this, args);\n          if (ret != null) val = ret;\n        }\n      }\n      return val;\n    };\n  };\n\n  Plugin.prototype.maybeInherit = function maybeInherit(loc) {\n    var inherits = this.take(\"inherits\");\n    if (!inherits) return;\n\n    inherits = _optionManager2.default.normalisePlugin(inherits, loc, \"inherits\");\n\n    this.manipulateOptions = this.chain(inherits, \"manipulateOptions\");\n    this.post = this.chain(inherits, \"post\");\n    this.pre = this.chain(inherits, \"pre\");\n    this.visitor = _babelTraverse2.default.visitors.merge([inherits.visitor, this.visitor]);\n  };\n\n  Plugin.prototype.init = function init(loc, i) {\n    if (this.initialized) return;\n    this.initialized = true;\n\n    this.maybeInherit(loc);\n\n    for (var key in this.raw) {\n      throw new Error(messages.get(\"pluginInvalidProperty\", loc, i, key));\n    }\n  };\n\n  Plugin.prototype.normaliseVisitor = function normaliseVisitor(visitor) {\n    for (var _iterator2 = GLOBAL_VISITOR_PROPS, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var key = _ref2;\n\n      if (visitor[key]) {\n        throw new Error(\"Plugins aren't allowed to specify catch-all enter/exit handlers. \" + \"Please target individual nodes.\");\n      }\n    }\n\n    _babelTraverse2.default.explode(visitor);\n    return visitor;\n  };\n\n  return Plugin;\n}(_store2.default);\n\nexports.default = Plugin;\nmodule.exports = exports[\"default\"];"],"file":"plugin.js"}