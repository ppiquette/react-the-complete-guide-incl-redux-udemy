{"version":3,"sources":["../node_modules/babel-traverse/lib/context.js"],"names":["exports","_getIterator2","require","_getIterator3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_path2","_path3","_babelTypes","t","_interopRequireWildcard","obj","newObj","Object","default","testing","process","TraversalContext","opts","node","keys","_iterator","_isArray","Array","_i","_ref","key","parentPath","parent","container","listKey","queue","visited","stop","_iterator2","_isArray2","_i2","_ref2","path","_iterator3","_isArray3","_i3","_ref3","_path","nodes","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _path2 = require(\"./path\");\n\nvar _path3 = _interopRequireDefault(_path2);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar testing = process.env.NODE_ENV === \"test\";\n\nvar TraversalContext = function () {\n  function TraversalContext(scope, opts, state, parentPath) {\n    (0, _classCallCheck3.default)(this, TraversalContext);\n    this.queue = null;\n\n    this.parentPath = parentPath;\n    this.scope = scope;\n    this.state = state;\n    this.opts = opts;\n  }\n\n  TraversalContext.prototype.shouldVisit = function shouldVisit(node) {\n    var opts = this.opts;\n    if (opts.enter || opts.exit) return true;\n\n    if (opts[node.type]) return true;\n\n    var keys = t.VISITOR_KEYS[node.type];\n    if (!keys || !keys.length) return false;\n\n    for (var _iterator = keys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var key = _ref;\n\n      if (node[key]) return true;\n    }\n\n    return false;\n  };\n\n  TraversalContext.prototype.create = function create(node, obj, key, listKey) {\n    return _path3.default.get({\n      parentPath: this.parentPath,\n      parent: node,\n      container: obj,\n      key: key,\n      listKey: listKey\n    });\n  };\n\n  TraversalContext.prototype.maybeQueue = function maybeQueue(path, notPriority) {\n    if (this.trap) {\n      throw new Error(\"Infinite cycle detected\");\n    }\n\n    if (this.queue) {\n      if (notPriority) {\n        this.queue.push(path);\n      } else {\n        this.priorityQueue.push(path);\n      }\n    }\n  };\n\n  TraversalContext.prototype.visitMultiple = function visitMultiple(container, parent, listKey) {\n    if (container.length === 0) return false;\n\n    var queue = [];\n\n    for (var key = 0; key < container.length; key++) {\n      var node = container[key];\n      if (node && this.shouldVisit(node)) {\n        queue.push(this.create(parent, container, key, listKey));\n      }\n    }\n\n    return this.visitQueue(queue);\n  };\n\n  TraversalContext.prototype.visitSingle = function visitSingle(node, key) {\n    if (this.shouldVisit(node[key])) {\n      return this.visitQueue([this.create(node, node, key)]);\n    } else {\n      return false;\n    }\n  };\n\n  TraversalContext.prototype.visitQueue = function visitQueue(queue) {\n    this.queue = queue;\n    this.priorityQueue = [];\n\n    var visited = [];\n    var stop = false;\n\n    for (var _iterator2 = queue, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var path = _ref2;\n\n      path.resync();\n\n      if (path.contexts.length === 0 || path.contexts[path.contexts.length - 1] !== this) {\n        path.pushContext(this);\n      }\n\n      if (path.key === null) continue;\n\n      if (testing && queue.length >= 10000) {\n        this.trap = true;\n      }\n\n      if (visited.indexOf(path.node) >= 0) continue;\n      visited.push(path.node);\n\n      if (path.visit()) {\n        stop = true;\n        break;\n      }\n\n      if (this.priorityQueue.length) {\n        stop = this.visitQueue(this.priorityQueue);\n        this.priorityQueue = [];\n        this.queue = queue;\n        if (stop) break;\n      }\n    }\n\n    for (var _iterator3 = queue, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var _path = _ref3;\n\n      _path.popContext();\n    }\n\n    this.queue = null;\n\n    return stop;\n  };\n\n  TraversalContext.prototype.visit = function visit(node, key) {\n    var nodes = node[key];\n    if (!nodes) return false;\n\n    if (Array.isArray(nodes)) {\n      return this.visitMultiple(nodes, node, key);\n    } else {\n      return this.visitSingle(node, key);\n    }\n  };\n\n  return TraversalContext;\n}();\n\nexports.default = TraversalContext;\nmodule.exports = exports[\"default\"];"],"file":"context.js"}